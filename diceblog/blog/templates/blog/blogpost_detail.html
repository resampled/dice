{% extends 'base_generic.html' %}
{% load dtsince %}

{% block content %}
<div class="breadcrumb"><a href="{% url 'post-list' %}">&lt;&lt; back to post list</a></div>
<div class="bp">
    <h2 class="bp-title">{{ blogpost.title }}</h2>
    <div class="bp-h">posted by
        <span class="bp-author"><a href="{{ blogpost.author.get_absolute_url }}">{{ blogpost.author }}</a></span>
        at
        <span class="bp-dt">{{ blogpost.order|dtsince }}</span>
            <span class="bp-longdt">({{ blogpost.order|date:"Y-m-d @ G:i:s" }} UTC)</span>
    </div>
    <p class="bp-full">{{ blogpost.pre_content }}</p>
</div>
<div class="cmtbox">
{% if user.is_authenticated %}
    <form method="post">
    {% csrf_token %}
    <textarea name="content"></textarea>
    <input type="submit" name="cmtsubmit" value="Post to {{ blogpost.id }}">
    </form>
{% else %}
    <textarea disabled>You're not logged in!</textarea>
    <input type="submit" disabled value="Post to {{ blogpost.id }}">
{% endif %}
</div>

{% if blogpost.blogcomment_set %}
    {% for cmt in blogpost.blogcomment_set.all %}
    <div class="cmt" id="cmt-{{ cmt.id }}">
        <div class="cmt-h">
            <span class="cmt-author">{{ cmt.author }}</span>
            <span class="cmt-dt">{{ cmt.order|dtsince }}</span>
            <span class="cmt-longdt">({{ cmt.order|date:"Y-m-d @ G:i:s" }} UTC)</span>
        </div>
        <p class="cmt-full">{{ cmt.content }}</p></div>    
    {% endfor %}
{% else %}
No comments.
{% endif %}
{% endblock %}
